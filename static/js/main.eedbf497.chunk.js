(this["webpackJsonprusty-pedestrians-webapp"]=this["webpackJsonprusty-pedestrians-webapp"]||[]).push([[0],{70:function(e,t,n){e.exports=n(83)},83:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(29),c=n.n(o),i=n(8),l=n(37),u=n(9),s=n(56),m=n.n(s),d=n(34),f=n(47);n(74);function h(){var e=Object(l.a)(["\n      html {\n        // Border box\n        *,\n        *::before,\n        *::after {\n          box-sizing: border-box;\n        }\n      }\n      body {\n        min-height: 100vh;\n      }\n\n      a,\n      button {\n        color: inherit;\n        cursor: pointer;\n        background: none;\n        border: none;\n        &:active,\n        &:focus {\n          color: ",";\n          outline: none;\n        }\n        &:hover {\n          color: ",";\n        }\n        &:disabled {\n          filter: opacity(50%);\n          &:hover {\n            cursor: not-allowed;\n          }\n        }\n      }\n    "]);return h=function(){return e},e}var b=function(){return r.a.createElement(d.a,{styles:Object(d.c)(h(),Object(f.a)(.05,"#f77976"),"#f77976")})},p=n(0),g=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,a=n/(2*Math.max(e,t)),r=[e*a,t*a],o=document.createElement("canvas");o.width=n,o.height=n;var c=o.getContext("2d"),i=c.createRadialGradient(n/2,n/2,r[0],n/2,n/2,r[1]);return i.addColorStop(0,"white"),i.addColorStop(1,"black"),c.fillStyle=i,c.fillRect(0,0,n,n),new p.CanvasTexture(o)},v=function(e){var t=e.radius,n=e.color,o=e.outerGlow,c=void 0!==o&&o,i=e.width,l=void 0===i?.15:i,u=e.segments,s=void 0===u?100:u,m=Object(a.useMemo)((function(){return g(t,c?t+l:t-l)}),[t,l,c]);return r.a.createElement("mesh",{rotation:[-Math.PI/2,0,0]},c?r.a.createElement("ringBufferGeometry",{args:[t,t+l,s]}):r.a.createElement("ringBufferGeometry",{args:[t-l,t,s]}),r.a.createElement("meshBasicMaterial",{color:new p.Color(n),alphaMap:m,transparent:!0}))},E=new p.Vector3(1,0,.5).normalize(),w=function(e){var t=e.position,n=e.radius,o=e.selected,c=e.height,l=void 0===c?2:c,u=e.onClick,s=Object(a.useState)("#ff0000"),m=Object(i.a)(s,2),d=m[0],h=m[1];return Object(a.useEffect)((function(){var e=new p.Vector3(t.x,0,t.y),n=Math.max(-.5,Math.min(.5,e.dot(E)/10))+.5;h(Object(f.b)(n,"#ff0000","#0000ff"))}),[]),r.a.createElement("group",{position:[t.x,0,t.y]},r.a.createElement("mesh",{position:[0,l/2,0],castShadow:!0,onClick:u},r.a.createElement("cylinderBufferGeometry",{args:[n,n,l,20]}),r.a.createElement("meshStandardMaterial",{color:d})),o?r.a.createElement(v,{radius:n,size:.05,color:"#4af2a1",outerGlow:!0}):null)},j=function(e){var t=e.origin,n=e.direction,o=e.color,c=e.width,i=void 0===c?.5:c,l=e.length,u=void 0===l?512:l,s=Object(a.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,t=document.createElement("canvas");t.width=e,t.height=e;var n=t.getContext("2d"),a=n.createLinearGradient(0,e/2,e,e/2);return a.addColorStop(0,"white"),a.addColorStop(1,"black"),n.fillStyle=a,n.fillRect(0,0,e,e),new p.CanvasTexture(t)}()}),[]);return r.a.createElement("group",{position:[t.x,0,t.y],rotation:[0,Math.atan2(-n.y,n.x),0]},r.a.createElement("mesh",{position:[0,0,-i/2],rotation:[-Math.PI/2,0,Math.PI/2]},r.a.createElement("planeBufferGeometry",{args:[i,u]}),r.a.createElement("meshBasicMaterial",{color:new p.Color(o),alphaMap:s,transparent:!0})))},y=n(38),O=new p.Color("#0068FF"),C=new p.Color("#310fb8"),x=new p.Color("#0068FF"),S=new p.Color("#39B92C"),k=new p.Color("#ff6442"),M=function(e){var t=e.agent,n=e.orca_constraints;return r.a.createElement("group",null,r.a.createElement("group",{position:[t.position.x,0,t.position.y]},r.a.createElement(y.a,{points:[[0,0,0],[t.velocity.x,0,t.velocity.y]],color:O}),r.a.createElement(v,{radius:t.maximum_speed,color:C}),r.a.createElement(v,{radius:t.desired_speed,color:x}),n.map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,{origin:n,direction:a,color:k}))}))),r.a.createElement("group",{position:[t.target.x,0,t.target.y]},r.a.createElement("mesh",null,r.a.createElement("sphereBufferGeometry",{args:[.1]}),r.a.createElement("meshStandardMaterial",{color:S}))))},B=function(e){var t=e.color,n=Object(u.g)().scene;return Object(a.useEffect)((function(){n.background=new p.Color(t)}),[n,t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("ambientLight",null),r.a.createElement("directionalLight",{castShadow:!0,position:[25,50,-8],"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-camera-far":100,"shadow-camera-left":-10,"shadow-camera-right":10,"shadow-camera-top":10,"shadow-camera-bottom":-10}))},G=n(54),I=function(e){var t=e.emoji,n=e.label;return r.a.createElement("span",{role:"img",label:n},t)};function F(){var e=Object(l.a)(["\n  font-size: 2rem;\n  display: flex;\n  justify-content: center;\n"]);return F=function(){return e},e}function _(){var e=Object(l.a)(["\n  height: 100vh;\n  background: ",";\n  display: flex;\n  flex-direction: column;\n"]);return _=function(){return e},e}Object(y.c)();var z=G.a.div(_(),"#808080"),P=G.a.div(F()),J=function(e){var t=e.universe,n=Object(a.useState)(null),o=Object(i.a)(n,2),c=o[0],l=o[1],s=Object(a.useState)({agents:[]}),d=Object(i.a)(s,2),f=d[0],h=f.agents,p=f.agentDebugInfo,g=d[1],v=Object(a.useCallback)((function(){var e=m()(t.render(),5).map((function(e,t){var n=Object(i.a)(e,5),a=n[0],r=n[1],o=(n[2],n[3],n[4]);return{index:t,position:{x:a,y:r},radius:o,select:function(){l(t)}}}));g(null!=c?{agents:e,agentDebugInfo:JSON.parse(t.render_debug_info(c))}:{agents:e})}),[g,t,c,l]),E=Object(a.useState)(!1),j=Object(i.a)(E,2),O=j[0],C=j[1],x=Object(a.useCallback)((function(){t.reset(),v(),C(!0)}),[t,v]);Object(a.useEffect)((function(){t.reset()}),[t]);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(a.useCallback)((function(){o((function(e){return!e}))}),[]);return[r,c]}(!0),k=Object(i.a)(S,2),G=k[0],F=k[1],_=Object(a.useCallback)((function(){t.update(1/60),C(!1),v()}),[t,v]);return Object(a.useEffect)((function(){if(!G){var e=setInterval(_,1e3/60);return function(){return clearInterval(e)}}v()}),[t,G,_,v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null),r.a.createElement(z,null,r.a.createElement(u.a,{camera:{position:[0,80,0],fov:10},shadowMap:!0},r.a.createElement(B,{color:"#808080"}),h.map((function(e){var t=e.index,n=e.position,a=e.radius,o=e.select;return r.a.createElement(w,{key:t,position:n,radius:a,onClick:o,selected:t===c})})),p?r.a.createElement(M,p):null,r.a.createElement("mesh",{position:[0,0,0],rotation:[-Math.PI/2,0,0],receiveShadow:!0},r.a.createElement("planeBufferGeometry",{args:[100,100,1e3,1e3]}),r.a.createElement("shadowMaterial",{transparent:!0,opacity:.4})),r.a.createElement(y.b,null)),r.a.createElement(P,null,r.a.createElement("button",{onClick:F,name:"toggle-play-pause"},G?r.a.createElement(I,{emoji:"\u25b6\ufe0f",label:"Play"}):r.a.createElement(I,{emoji:"\u23f8",label:"Pause"})),r.a.createElement("button",{onClick:_,name:"single-step",disabled:!G},r.a.createElement(I,{emoji:"\u23ed",label:"Single Step"})),r.a.createElement("button",{onClick:x,name:"reset",disabled:O},r.a.createElement(I,{emoji:"\u21a9\ufe0f",label:"Restart"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),n.e(3).then(n.bind(null,86)).then((function(e){var t=e.Universe.new();t.load_scenario(JSON.stringify({scenario:"AntipodalCircle",agents_count:5,radius:6.5})),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,{universe:t})),document.getElementById("root"))})).catch((function(e){return console.error("Error importing `index.js`:",e)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.eedbf497.chunk.js.map